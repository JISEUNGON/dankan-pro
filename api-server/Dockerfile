FROM openjdk:11-jdk

WORKDIR /api-server
COPY *.jar /api-server/server.jar

CMD ["sh", "-c", "java -jar server.jar \
    --AWS_S3_ACCESS_KEY=$AWS_S3_ACCESS_KEY \
    --AWS_S3_BUCKET=$AWS_S3_BUCKET \
    --AWS_SECRET_KEY=$SECRET_KEY \
    --DB_IP=$DB_IP \
    --DB_PASSWORD=$DB_PASSWORD \
    --DB_PORT=$DB_PORT \
    --DB_SCHEMA=$DB_SCHEMA \
    --DB_USERNAME=$DB_USERNAME \
    --JWT_TOKEN_HEADER=$JWT_TOKEN_HEADER \
    --JWT_TOKEN_SECRET_KEY=$JWT_TOKEN_SECRET_KEY \
    --KAKAO_API_KEY=$KAKAO_API_KEY \
    --KAKAO_REDIRECT_URL=$KAKAO_REDIRECT_URL \ 
    --GOOGLE_CLIENT_ID=$GOOGLE_CLIENT_ID \
    --GOOGLE_CLIENT_SECRET=$GOOGLE_CLIENT_SECRET \
    --GOOGLE_REDIRECT_URL=$GOOGLE_REDIRECT_URL \
    --SMS_API_KEY=$SMS_API_KEY \
    --SMS_API_SECRET_KEY=$SMS_API_SECRET_KEY \
    --LOG_DIR=$LOG_DIR \
    --NAVER_ID=$NAVER_ID \
    --NAVER_PASSWORD=$NAVER_PASSWORD \
    --PHNE_NUMBER=$PHONE_NUMBER \
    --SLACK_WEBHOOK_URL=$SLACK_WEBHOOK_URL \
    --DYNAMODB_ACCESS_KEY=$DYNAMODB_ACCESS_KEY \
    --DYNAMODB_ENDPOINT=$DYNAMODB_ENDPOINT \
    --DYNAMODB_REGION=$DYNAMODB_REGION \
    --DYNAMODB_SECRET_KEY=$DYNAMODB_SECRET_KEY \
    --REDIS_HOST=$REDIS_HOST \
    --REDIS_PORT=$REDIS_PORT \
    --SENTRY_AUTH_TOKEN=$SENTRY_AUTH_TOKEN \ 
    --SENTRY_DSN=$SENTRY_DSN \
    --LOG_FILE_DIR=$LOG_FILE_DIR \
    --PROFILE=$PROFILE"]
